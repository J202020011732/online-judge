server {
	listen 80;
	listen [::]:80;
	charset utf-8;
	root /home/torapture/codes/OnlineJudge/src/Front;

	index index.html index.htm index.nginx-debian.html index.php;

	server_name localhost;

	location = /favicon.ico { log_not_found off; access_log off; }

    location ~ ^/(protected|framework|themes/\w+/views) {
        deny  all;
        log_not_found off;
        access_log off;
    }

	location / {
		# First attempt to serve request as file, then
		# as directory, then fall back to displaying a 404.
		try_files $uri $uri/ /index.php?$args;
	}

	# pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
	#
	location ~ \.php$ {
		include snippets/fastcgi-php.conf;
		# With php5.6-fpm:
		fastcgi_pass unix:/run/php/php5.6-fpm.sock;
		#fastcgi_index index.php;
		fastcgi_param HTTPS on;
		include fastcgi.conf;
		if (!-f $request_filename){
                rewrite (.*) /index.php;
            }
	}

	location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
         expires max;
         log_not_found on;
    }

    # prevent nginx from serving dotfiles (.htaccess, .svn, .git, etc.)
    location ~ /\. {
        deny all;
        access_log off;
        log_not_found off;
    }
	# deny access to .htaccess files, if Apache's document root
	# concurs with nginx's one
	#
	#location ~ /\.ht {
	#	deny all;
	#}
}

